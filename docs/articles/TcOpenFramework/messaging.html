<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Messaging | TcOpen </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Messaging | TcOpen ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../favicon.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="../toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <p class="text-logo">TcOpen</p>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../articles/intro.html" title="Articles">Articles</a>
                      </li>
                      <li>
                          <a href="../../api/index.html" title="API reference">API reference</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="../intro.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Conventions</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Conventions/Conventions.html" title="General" class="">General</a>
                          </li>
                          <li class="">
                            <a href="../Conventions/Component.html" title="Components" class="">Components</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">TcOpen Framework</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../TcOpenFramework/application.html" title="Application" class="">Application</a>
                          </li>
                          <li class="active">
                            <a href="../TcOpenFramework/messaging.html" title="Messaging" class="active">Messaging</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">TcOpen Inxton</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../Inxton/Colors_wpf.html" title="Colors Material Design WPF" class="">Colors Material Design WPF</a>
                          </li>
                          <li class="">
                            <a href="../Inxton/InxtonConventions.html" title="Inxton Conventions" class="">Inxton Conventions</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="messaging">Messaging</h1>

<p>Messaging system provides a simple mechanism for posting various information (state, diagnostics, etc.) to the higher-level application (e.g. HMI/SCADA).</p>
<p>Each <a href="https://docs.tcopengroup.org/api/TcoCore/TcoCore.TcoObject.PlcTcoObject.html">TcoObject</a> contains a messenger that allows reporting information about that object to a higher-level application.</p>
<h2 id="usage">Usage</h2>
<p>In order to post a message, you access <code>Messenger</code> of the object (TcoObject).</p>
<pre><code class="lang-iecst">IF(applo13.LunarModule.OxigenTankLowLimit) THEN
    apolo13.LunarModule.Messenger.Warning('Huston, we have a problem');
END_IF;    


IF(appolo13.LunarModule.OxigenTankEmpty) THEN
    apolo13.LunarModule.Messenger.Catastrophic('Huston we are not going to make it to them Moon.');
END_IF;   

IF(appolo13.OceanSplash) THEN
    apolo13.Messenger.Info('Huston this is Eagle.');
END_IF; 
</code></pre>
<h2 id="prioritisation">Prioritisation</h2>
<p>Each object has a single instance of a message holder. This instance is located in <code>TcoObject.Messenger._mime</code>. When there are more messages posted in the same cycle, the messenger will prioritize the one with the highest severity.</p>
<p>More messages in the same cycle will reflect in the counter <code>PerCycleCount</code>, which will be greater than <code>1</code>.</p>
<h2 id="message-structure">Message structure</h2>
<table>
<thead>
<tr>
<th>Item</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>TimeStamp</td>
<td>Time-stamp of the last occurrence of the message.</td>
</tr>
<tr>
<td>Text</td>
<td>Arbitrary message text.</td>
</tr>
<tr>
<td>Identity</td>
<td>Identity of the object that posted this message</td>
</tr>
<tr>
<td></td>
<td>(for future expansion and buffering).</td>
</tr>
<tr>
<td>Category</td>
<td>Message category indicating the severity of the message.</td>
</tr>
<tr>
<td>Cycle</td>
<td>Context cycle in which the message was posted.</td>
</tr>
<tr>
<td>PerCycleCount</td>
<td>Counter of messages posted in the same context cycle</td>
</tr>
</tbody>
</table>
<h2 id="message-categories">Message categories</h2>
<h3 id="debug">Debug</h3>
<p>Debug category message to be used for debugging purposes only. Use when you need to report debug information for you as a programmer.</p>
<h3 id="trace">Trace</h3>
<p>Use when you need to track detailed information about the internal states of the program for detailed visibility. This is the lowest level of category that can be used in production for detailed observation of the PLC program.</p>
<h3 id="info">Info</h3>
<p>Use this category when you want to report a notification that may be of interest to the user, but does not adveresly affect a process.</p>
<h3 id="notification">Notification</h3>
<p>Use when you want to deliver information to the user that user needs to be notified, some non essential activity is required.</p>
<h3 id="warning">Warning</h3>
<p>Use this category when you want to report to the user information about a possible problem that may adversely affect a process.
Information in this category aims to help the user to identify a problem; the cause of such problem does not necessarily stop the process.</p>
<h3 id="error">Error</h3>
<p>Use this category when there is a failure that cannot be immediately recovered and an intervention is needed. This is typically a situation when a device fails to deliver the expected result. Do not use this category to report information about the failed process like measurement or detection.</p>
<h3 id="programming-error">Programming error</h3>
<p>Use this category to inform about a possible programming error, defect in settings, or missing information at a level of programming or system or process settings.</p>
<h3 id="critical">Critical</h3>
<p>Use this category when a critical error occurred, which is not recoverable by software (reset/restore), and a detailed inspection is required (TotalStop, Safety, etc.).</p>
<h3 id="catastrophic">Catastrophic</h3>
<p>Use this category when there is a situation when the device cannot continue operations due to irrecoverable failure.</p>
<h2 id="how-to-access-the-message">How to access the message</h2>
<p>When you try to read the messages from a non-inxton application, you will need to evaluate that the message is valid. The validity of the message can be determined by comparing the equality of <code>TcoObject._mime.Cycle</code> with <code>Context._startCycleCount</code>. When these two values equal, the message is valid. The equality evaluation should occur in the higher-level application, not in the PLC.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TcOpenGroup/TcOpen.Documentation/blob/dev/articles/TcOpenFramework/messaging.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <p>Generated by <strong>DocFX</strong> | Delivered by TcOpenGroup contributors</p>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
